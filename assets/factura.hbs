<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <!-- related to the invoice header -->
    <header>
        <div class="invoice-header">
            <div class="logo">
                <img src="{{logo}}" alt="LOGO">
            </div>
            <table>
                <tbody>
                    <tr>
                        <td> Serie </td>
                        <td> {{serie}} </td>
                    </tr>
                    <tr>
                        <td> Folio </td>
                        <td> {{folio}} </td>
                    </tr>
                    <tr>
                        <td> Fecha y Hora </td>
                        <td> {{fecha}} </td>
                    </tr>
                    <tr>
                        <td> Forma de pago </td>
                        <td> {{formapago}} </td>
                    </tr>
                    <tr>
                        <td> Número de certificado </td>
                        <td> {{numcertificado}} </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="content">
            <table>
                <thead>
                    <tr>
                        <th colspan="2">
                            Emisor
                        </th>
                    </tr>
                </thead>
                {{#with emisor}}
                <tbody>
                    <tr>
                        <td> RFC </td>
                        <td> {{rfc}} </td>
                    </tr>
                    <tr>
                        <td> Nombre </td>
                        <td> {{nombre}} </td>
                    </tr>
                    <tr>
                        <td> Regimen Fiscal </td>
                        <td> {{regimenfiscal}} </td>
                    </tr>
                </tbody>
                {{/with}}
            </table>
            <table>
                <thead>
                    <tr>
                        <th colspan="2">
                            Receptor
                        </th>
                    </tr>
                </thead>
                {{#with receptor}}
                <tbody>
                    <tr>
                        <td> RFC </td>
                        <td> {{rfc}} </td>
                    </tr>
                    <tr>
                        <td> Nombre </td>
                        <td> {{nombre}} </td>
                    </tr>
                    <tr>
                        <td> Regimen Fiscal </td>
                        <td> {{regimenfiscal}} </td>
                    </tr>
                    <tr>
                        <td> Código Postal </td>
                        <td> {{codigopostal}} </td>
                    </tr>
                    <tr>
                        <td> Dirección </td>
                        <td> {{direccion}} </td>
                    </tr>
                    <tr>
                        <td> Ciudad </td>
                        <td> {{ciudad}} </td>
                    </tr>
                </tbody>
                {{/with}}
            </table>
        </div>
    </header>
    <div class="body">
        <table>
            <thead>
                <tr>
                    <th> Clave </th>
                    <th> Cantidad </th>
                    <th> Clave de unidad </th>
                    <th> Unidad </th>
                    <th> Descripcion </th>
                    <th> Valor unitario </th>
                    <th> Importe </th>
                    <th> Objeto Impuesto </th>
                </tr>
            </thead>
            <tbody>
                {{#each conceptos}}
                <tr>
                    <td> {{claveprodservicio}} </td>
                    <td> {{cantidad}} </td>
                    <td> {{claveunidad}} </td>
                    <td> {{unidad}} </td>
                    <td> {{descripcion}} </td>
                    <td> ${{valorunitario}} </td>
                    <td> ${{importe}} </td>
                    <td> {{objetoimpuesto}} </td>
                </tr>
                {{/each}}
                <tr>
                    <td colspan="2" style="background-color: #777; font-weight: bold;">
                        Cantidad con letras:
                    </td>
                    <td colspan="6" style="text-align: center;">
                        ***
                        <b> {{letras}} </b>
                        Pesos Mxn
                        ***
                    </td>
                </tr>
            </tbody>
        </table>
        {{#with impuestos}}
        <div class="traslados">
            {{#each traslados}}
            <table>
                <thead>
                    <tr>
                        <th colspan="5"> Impuestos Trasladados </th>
                    </tr>
                    <tr>
                        <th> Base </th>
                        <th> Impuesto </th>
                        <th> Tipo Factor </th>
                        <th> Tasa Cuota </th>
                        <th> Importe</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td> {{base}} </td>
                        <td> {{impuesto}} </td>
                        <td> {{tipofactor}} </td>
                        <td> {{tasaocuota}} </td>
                        <td> ${{importe}} </td>
                    </tr>
                </tbody>
            </table>
            {{/each}}
        </div>
        {{/with}}
        <div class="tfooter">
            <table>
                <tbody>
                    <tr>
                        <td> Subtotal </td>
                        <td> ${{subtotal}} </td>
                    </tr>
                    <tr>
                        <td> Impuesto </td>
                        <td> ${{subtotal}} </td>
                    </tr>
                    <tr>
                        <td> Total </td>
                        <td> ${{total}} </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="legal">
        <div class="information">
            <div class="field">
                <div class="legend">Sello digital del que lo expide</div>
                <div class="data">{{sello}}</div>
            </div>
            <div class="field">
                <div class="legend">Certificado</div>
                <div class="data">{{certificado}}</div>
            </div>
            <div class="field">
                <div class="legend">Número de certificado</div>
                <div class="data">{{numcertificado}}</div>
            </div>
            <div class="field">
                <div class="legend">
                    Observaciones
                </div>
                {{#with formatos}}
                <div class="data">
                    {{observaciones}}
                </div>
                {{/with}}
            </div>
        </div>
        <div class="qr">
            <img src="{{qrcontent}}" alt="Código QR">
        </div>
    </div>
    <style>
        .invoice-header {
            display: flex;
            width: 100%;
            margin-bottom: 1rem;
        }

        .logo {
            display: flex;
            width: 50%;
            justify-content: center;
            align-items: center;
        }

        .invoice-header img {
            width: 50%;
            object-fit: contain;
        }

        .invoice-header table {
            width: 50%;
        }

        .content {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .content table {
            width: 50%;
            height: 200px;
        }

        table {
            border-collapse: collapse;
            /* Para unir los bordes de las celdas */
        }


        table thead tr th {
            background: #777;
            font-weight: bolder;
        }

        table tbody tr td:first-child {
            background-color: #777;
            font-weight: bold;
        }

        .body {
            margin-bottom: 1rem;
        }

        .body table {
            width: 100%;
        }

        .body table tbody tr td:first-child {
            background: white;
            font-weight: initial;
        }

        .body .tfooter table tbody tr td:first-child {
            background: #777;
            font-weight: initial;
        }

        .traslados {
            margin-top: 1rem;
        }

        .tfooter {
            display: flex;
            justify-content: flex-end;
        }

        .tfooter table {
            width: 30%;
        }

        .tfooter table tr td:first-child {
            text-align: end;
        }

        .tfooter table td {
            text-align: center;
        }

        table,
        th,
        td {
            border: 1px solid black;
            /* Líneas negras */
        }

        .legal {
            display: flex;
        }

        .legal .information {
            width: 70%;
        }

        .legal .information .field .legend{
            background: #777;
            font-weight: bold;
            border: 1px solid #777;
        }

        .legal .information .field .data{
            word-break: break-all;
            font-size: .5ch;
            border: 1px solid #777;
        }

        .legal .qr {
            width: 30%
        }

        .legal .qr img{
            width: 100%;
            object-fit: contain;
        }
    </style>
</body>

</html>